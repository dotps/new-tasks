# Таск-менеджер

Бекенд-приложение REST API сервиса для управления задачами внутри команды. Создание проектов и задач к ним. Учебный проект MetaLamp Node.js Education.

Написано на node.js с использованием typescript, Express, Prisma и PostgreSQL.

Установить зависимости: `npm install`<br>
Создать базу в PostgreSql<br>
Переименовать `.env-default` в `.env` и задать настройки БД<br>
Сгенерировать клиента Prisma `npx prisma generate`<br>
Запустить миграцию с начальными данными `npx prisma migrate deploy`<br>
Запустить приложение: `npm run dev`

## Возможности ##
* Регистрация пользователя `POST` `/api/users`
* Создание проекта `POST` `/api/projects`
* Добавление задачи в проект `POST` `/api/tasks`
* Обновление задачи `PUT` `/api/tasks/:taskId`
* Назначение исполнителя задачи `PATCH` `/api/tasks/:taskId/assigned-user`
* Изменение статуса задачи `PATCH` `/api/tasks/:taskId/status`
* Просмотр всех проектов и задач `GET` `/api/projects`
* Просмотр времени работы одного разрабочика `GET` `/api/users/1/working-time?projects=1,2,3&start_date=2025-01-15T11:09:57.535Z&end_date=2025-12-15T11:09:57.535Z`
* Просмотр полного времени работы над проектом `GET`<br>`/api/projects/1/working-time?start_date=2025-01-15T11:09:57.535Z&end_date=2025-12-15T11:09:57.535Z`

Доступ к сервису осуществляется через токен авторизации *Bearer Token*. Токен выдается при регистрации пользователя.

Зарегистрироваться и получить токен `POST` `/api/users`
```json
{
  "name": "Test",
  "email": "test-test@test.ru"
}
```
или использовать следующий токен (действует до конца 2025 года) 
```
"accessToken": "YWNjZXNzLXRva2VuITEhMTc3ODM5OTA1NjU4Ng==",
```
Создание проекта `POST` `/api/projects`
```json
{
  "title": "Заголовок проекта",
  "description": "Описание проекта"
}
```
Создание задачи `POST` `/api/tasks`
```json
{
  "title": "Первая задача",
  "description": "Описание задачи",
  "dueAt": "2025-10-15T02:13:21",
  "projectId": 1
}
```
Обновление задачи `PUT` `/api/tasks/:taskId`

Если не было ошибок обновление возвращает статус 200, обновляет только то, что передано. Не информирует какие поля были обновлены, игнорирует поля которые не описаны в сущности. 
```json
{
  "title": "Первая задача - обновление",
  "description": "Описание задачи - обновление",
  "dueAt": "2025-10-15T02:13:21",
  "projectId": 1
}
```
Остальное поведение см. в `tests/postman` там есть коллекция запросов.

## Тестирование ##

### Автоматические тесты ###
Реализованы тесты с моками и интеграционные для полной проверки работы api. Проверяется валидность входных данных, успешные и неуспешные результаты ответов, а также проблемы подключения к БД.

Запуск тестов: `npm test`

### Postman ###

В папке `tests/postman` есть коллекция запросов для тестирования вручную.